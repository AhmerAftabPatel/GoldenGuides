(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[1],{11:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"f",(function(){return d}));var a=n(12),r=n.n(a),o=n(29),c=n(25),i=n.n(c),l=function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())},s=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window){e.next=11;break}return localStorage.removeItem("jwt"),t(),e.prev=3,e.next=6,i.a.get("/api/signout").then((function(e){return console.log("signout success")})).catch((function(e){return console.error(e)}));case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(3),e.abrupt("return",console.log(e.t0));case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(e){return console.log("email: ",e),fetch("/api/forgot-password/",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},p=function(e){return fetch("/api/reset-password/",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},m=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},d=function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://myfirstw3bsite.herokuapp.com/api/social-login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,console.log("signin response: ",n),e.abrupt("return",n.json());case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},112:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"f",(function(){return d})),n.d(t,"a",(function(){return f}));var a=n(12),r=n.n(a),o=n(29),c=n(25),i=n.n(c),l=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("/api/user/".concat(t));case 3:if(!(a=e.sent)){e.next=6;break}return e.abrupt("return",a);case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0.response),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),s=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.delete("/api/user/".concat(t),{headers:{Authorization:"Bearer ".concat(n)}});case 3:if(!(a=e.sent)){e.next=6;break}return e.abrupt("return",a);case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(r.a.mark((function e(t,n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/".concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(n)},body:a}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("/api/users");case 3:if(!(t=e.sent)){e.next=6;break}return e.abrupt("return",t.data.users);case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(r.a.mark((function e(t,n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.put("/api/user/follow",{userId:t,followId:a},{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return e.data})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(r.a.mark((function e(t,n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/unfollow",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({userId:t,unfollowId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/user/findpeople/".concat(t),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},139:function(e,t,n){e.exports=n.p+"static/media/404.3a0396ed.webp"},157:function(e,t,n){e.exports=n(188)},162:function(e,t,n){},188:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(53),c=n.n(o),i=(n(162),n(80)),l=n(81),s=n(83),u=n(82),p=n(9),m=n(142),d=n(11),f=function(e){var t=e.component,n=Object(m.a)(e,["component"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return Object(d.c)()?r.a.createElement(t,e):r.a.createElement(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},h=n(139),b=n.n(h),v=n(18),g=n(76),E=Object(p.g)((function(e){var t=e.history,n=Object(d.c)()?Object(d.c)().user.name:"",a=Object(d.c)()?Object(d.c)().user._id:"";return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark scrolling-navbar"},r.a.createElement(v.c,{to:"/",className:"navbar-brand",style:{color:"gold"}},"GG"),r.a.createElement("button",{className:"navbar-toggler bg-dark",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(v.c,{exact:!0,to:"/",className:"nav-link",activeClassName:"line"},r.a.createElement("span",{className:"ui green button",style:{cursor:"pointer",color:"#ffffff"}},"Home"))),Object(d.c)()&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(v.c,{exact:!0,to:"/users",className:"nav-link",activeClassName:"line"},r.a.createElement("span",{className:"ui green button",style:{cursor:"pointer",color:"#ffffff"}},"Users"))),!1===Object(d.c)()?r.a.createElement("li",{className:"nav-item ml-2 mt-2"},r.a.createElement("div",{className:"ui buttons"},r.a.createElement(v.c,{to:"/login"},r.a.createElement("button",{className:"ui button"},"Login")),r.a.createElement("div",{className:"or","data-text":"or"}),r.a.createElement(v.c,{to:"/signup"},r.a.createElement("button",{className:"ui positive button"},"Register")))):null,Object(d.c)()&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(v.c,{className:"nav-link",activeClassName:"line",to:"/create/post"},r.a.createElement("span",{className:"ui green button",style:{cursor:"pointer",color:"#ffffff"}},"Create Blog")))),r.a.createElement("ul",{className:"navbar-nav ml-auto nav-flex-icons"},Object(d.c)()&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{className:"navbar-text ml-auto white-text"},r.a.createElement(v.c,{className:"nav-link",activeClassName:"line",to:"/user/".concat(a)},r.a.createElement("span",{className:"ui green button",style:{cursor:"pointer",color:"#ffffff"}},r.a.createElement(g.a,{style:{display:window.innerWidth<=800?"none":""},name:"user"}),n)))),Object(d.c)()&&"admin"===Object(d.c)().user.role&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(v.c,{to:"/admin",activeClassName:"line",className:"nav-link"},"Admin Tools")),Object(d.c)()&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{className:"navbar-text ml-auto white-text"},r.a.createElement(v.c,{className:"nav-link",activeClassName:"line",to:"/findpeople"},r.a.createElement("span",{className:"ui blue button",style:{cursor:"pointer",color:"#ffffff"}},r.a.createElement(g.a,{style:{display:window.innerWidth<=800?"none":""},name:"users"}),"Discover")))),Object(d.c)()?r.a.createElement("li",{className:"nav-item ml-2"},r.a.createElement("span",{className:"ui red button mt-3",style:{cursor:"pointer",color:"#ffffff"},onClick:function(){return Object(d.d)((function(){return t.push("/")}))}},"Signout")):null)))})),w=n(111),y=n(112),j=n(200),O=n(201),N=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).init=function(t){var n=Object(d.c)().token;Object(y.d)(t,n).then((function(t){return e.setState({id:t.data.id,about:"",name:t.data.name,email:t.data.email})})).catch((function(e){return console.log(e)}))},e.handleChange=function(t){return function(n){var a;e.setState({error:""});var r="photo"===t?n.target.files[0]:n.target.value,o="photo"===t?n.target.files[0].size:0;e.userData.set(t,r),e.setState((a={},Object(w.a)(a,t,r),Object(w.a)(a,"fileSize",o),a))}},e.clickSubmit=function(t){if(t.preventDefault(),e.setState({loading:!0}),e.isValid()){var n=e.props.match.params.userId,a=Object(d.c)().token;Object(y.g)(n,a,e.userData).then((function(t){t.error?e.setState({error:t.error}):"admin"===Object(d.c)().user.role&&e.setState({id:t._id,redirectToProfile:!0})}))}},e.isValid=function(){var t=e.state,n=t.name,a=t.email,r=t.password;return t.fileSize>1e6?(e.setState({error:"File size should be less than 100kb",loading:!1}),!1):0===n.length?(e.setState({error:"Name is required",loading:!1}),!1):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a)?!(r.length>=1&&r.length<=5)||(e.setState({error:"Password must be at least 6 characters long",loading:!1}),!1):(e.setState({error:"A valid Email is required",loading:!1}),!1)},e.toggle=function(){var e=document.getElementById("materialRegisterFormPassword");"password"===e.type?e.type="text":e.type="password"},e.state={id:"",name:"",email:"",password:"",redirectToProfile:!1,loading:!1,fileSize:0,about:""},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.userData=new FormData;var e=this.props.match.params.userId;this.init(e)}},{key:"render",value:function(){var e=this.state,t=e.id,n=e.name,a=e.email,o=e.redirectToProfile,c=e.loading,i=e.about;return o?r.a.createElement(p.a,{push:!0,to:"/user/".concat(t)}):r.a.createElement("div",{className:"container",style:{marginTop:"1vh",padding:"5vw"}},r.a.createElement("div",{className:"card"},r.a.createElement("h5",{className:"card-header text-center"},r.a.createElement("strong",null,"Edit Profile")),r.a.createElement("div",{className:"card-body px-lg-5 pt-0"},c?"Loading...":null,r.a.createElement(j.a,{onSubmit:this.clickSubmit,encType:"multipart/form-data"},r.a.createElement(j.a.Field,null,r.a.createElement("input",{type:"file",accept:"image/*",required:"required",onChange:this.handleChange("photo")})),r.a.createElement(j.a.Field,null,r.a.createElement("input",{autoCapitalize:"true",autoComplete:"username",type:"text",required:"required",onChange:this.handleChange("name"),value:n})),r.a.createElement(j.a.Field,null,r.a.createElement("input",{autoComplete:"email",type:"email",required:"required",onChange:this.handleChange("email"),value:a,id:"email"})),r.a.createElement(j.a.Field,null,r.a.createElement("input",{autoComplete:"current-password",type:"password",placeholder:"password",required:"required",onChange:this.handleChange("password")})),r.a.createElement(j.a.Field,null,r.a.createElement("textarea",{onChange:this.handleChange("about"),value:i,id:"materialContactFormMessage",placeholder:"About",rows:"3"})),r.a.createElement(O.a,{type:"submit"},"Submit")))))}}]),n}(a.Component),k=n(25),x=n.n(k);var C=Object(a.lazy)((function(){return n.e(7).then(n.bind(null,249))})),S=Object(a.lazy)((function(){return n.e(10).then(n.bind(null,241))})),z=Object(a.lazy)((function(){return n.e(6).then(n.bind(null,250))})),T=Object(a.lazy)((function(){return n.e(9).then(n.bind(null,248))})),A=Object(a.lazy)((function(){return n.e(13).then(n.bind(null,213))})),I=Object(a.lazy)((function(){return n.e(12).then(n.bind(null,242))})),P=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,243))})),q=Object(a.lazy)((function(){return n.e(5).then(n.bind(null,251))})),F=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,244))})),W=Object(a.lazy)((function(){return n.e(14).then(n.bind(null,245))})),B=Object(a.lazy)((function(){return n.e(15).then(n.bind(null,246))})),U=Object(a.lazy)((function(){return n.e(4).then(n.bind(null,247))})),D=function(){return r.a.createElement("div",{id:"error"},r.a.createElement("img",{src:b.a,alt:"404",style:{height:"90vh"}}))},J=function(){return Object(a.useEffect)((function(){x.a.defaults.headers.post["Content-Type"]="application/json",x.a.defaults.baseURL="https://myfirstw3bsite.herokuapp.com/",x.a.defaults.headers.post.Accept="application/json"}),[]),r.a.createElement("div",{id:"main"},r.a.createElement(E,null),r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",{align:"center",className:"ui segment"},r.a.createElement("div",{className:"ui active inverted dimmer"},r.a.createElement("div",{className:"ui text loader"},"Loading")),r.a.createElement("p",null))},r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/",exact:!0,component:C}),r.a.createElement(p.b,{path:"/signup",component:S}),r.a.createElement(p.b,{path:"/post/:postId",component:q}),r.a.createElement(f,{path:"/admin",component:U}),r.a.createElement(f,{path:"/user/:userId",component:T}),r.a.createElement(f,{path:"/posts/edit/:postId",component:F}),r.a.createElement(f,{path:"/profile/edit/:userId",component:N}),r.a.createElement(f,{path:"/findpeople",component:I}),r.a.createElement(f,{path:"/create/post",component:P}),r.a.createElement(p.b,{path:"/login",component:z}),r.a.createElement(p.b,{path:"/users",component:A}),r.a.createElement(p.b,{path:"/forgot-password",component:W}),r.a.createElement(p.b,{path:"/reset-password/:resetPasswordToken",component:B}),r.a.createElement(p.b,{component:D}))))},L=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(J,null),r.a.createElement("footer",{className:"p-4 text-white text-center",style:{backgroundColor:"#0E2F56"}},"Made with love",r.a.createElement("br",null),"by ",r.a.createElement("span",{style:{color:"gold"}},"The Golden Dev")))}}]),n}(a.Component),R=(n(187),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function M(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");R?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):M(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):M(t,e)}))}}()}},[[157,2,3]]]);
//# sourceMappingURL=main.acf80b8d.chunk.js.map