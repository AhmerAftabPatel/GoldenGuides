(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4,13],{204:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return p})),n.d(t,"j",(function(){return d})),n.d(t,"h",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"k",(function(){return b})),n.d(t,"a",(function(){return j})),n.d(t,"i",(function(){return O}));var a=n(12),r=n.n(a),c=n(29),o=n(25),s=n.n(o),i=function(){var e=Object(c.a)(r.a.mark((function e(t,n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("/api/post/new/".concat(t),a,{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return e.data})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/post").then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e),e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/post/?page=".concat(t)).then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e.response),e.response}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e,t,n){return fetch("/api/post/like",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},d=function(e,t,n){return fetch("/api/post/unlike",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},m=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/post/".concat(t)).then((function(e){return e.data})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/post/by/".concat(t),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return e.data.result})).catch((function(e){return console.error(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/post/".concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(r.a.mark((function e(t,n,a){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s()("/api/post/".concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(n)},data:a});case 3:if(!(c=e.sent)){e.next=6;break}return e.abrupt("return",c);case 6:e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(0),console.error(e.t0),!e.t0.response.data){e.next=13;break}return e.abrupt("return",e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,a){return e.apply(this,arguments)}}(),j=function(e,t,n,a){return fetch("/api/post/comment",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n,comment:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},O=function(e,t,n,a){return fetch("/api/post/uncomment",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n,comment:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}},205:function(e,t,n){e.exports=n.p+"static/media/Default.2aee7378.png"},211:function(e,t,n){"use strict";var a=n(80),r=n(81),c=n(83),o=n(82),s=n(0),i=n.n(s),u=n(204),l=n(18),p=n(1),d=n(5),m=n(3),h=(n(6),n(38)),f=n(131),b=n(132),j=n(4),O=n(141),v=n(135);function g(e){var t=e.children,n=e.className,a=e.content,r=e.textAlign,c=Object(m.a)(Object(h.c)(r),"description",n),o=Object(f.a)(g,e),s=Object(b.a)(g,e);return i.a.createElement(s,Object(p.a)({},o,{className:c}),j.a.isNil(t)?a:t)}g.handledProps=["as","children","className","content","textAlign"],g.propTypes={};var E=g;function y(e){var t=e.children,n=e.className,a=e.content,r=e.textAlign,c=Object(m.a)(Object(h.c)(r),"header",n),o=Object(f.a)(y,e),s=Object(b.a)(y,e);return i.a.createElement(s,Object(p.a)({},o,{className:c}),j.a.isNil(t)?a:t)}y.handledProps=["as","children","className","content","textAlign"],y.propTypes={};var N=y;function k(e){var t=e.children,n=e.className,a=e.content,r=e.textAlign,c=Object(m.a)(Object(h.c)(r),"meta",n),o=Object(f.a)(k,e),s=Object(b.a)(k,e);return i.a.createElement(s,Object(p.a)({},o,{className:c}),j.a.isNil(t)?a:t)}k.handledProps=["as","children","className","content","textAlign"],k.propTypes={};var x=k;function w(e){var t=e.children,n=e.className,a=e.content,r=e.description,c=e.extra,o=e.header,s=e.meta,u=e.textAlign,l=Object(m.a)(Object(h.a)(c,"extra"),Object(h.c)(u),"content",n),d=Object(f.a)(w,e),O=Object(b.a)(w,e);return j.a.isNil(t)?j.a.isNil(a)?i.a.createElement(O,Object(p.a)({},d,{className:l}),Object(v.c)(N,(function(e){return{content:e}}),o,{autoGenerateKey:!1}),Object(v.c)(x,(function(e){return{content:e}}),s,{autoGenerateKey:!1}),Object(v.c)(E,(function(e){return{content:e}}),r,{autoGenerateKey:!1})):i.a.createElement(O,Object(p.a)({},d,{className:l}),a):i.a.createElement(O,Object(p.a)({},d,{className:l}),t)}w.handledProps=["as","children","className","content","description","extra","header","meta","textAlign"],w.propTypes={};var A=w,P=n(39);function C(e){var t=e.centered,n=e.children,a=e.className,r=e.content,c=e.doubling,o=e.items,s=e.itemsPerRow,u=e.stackable,l=e.textAlign,d=Object(m.a)("ui",Object(h.a)(t,"centered"),Object(h.a)(c,"doubling"),Object(h.a)(u,"stackable"),Object(h.c)(l),Object(h.f)(s),"cards",a),O=Object(f.a)(C,e),v=Object(b.a)(C,e);if(!j.a.isNil(n))return i.a.createElement(v,Object(p.a)({},O,{className:d}),n);if(!j.a.isNil(r))return i.a.createElement(v,Object(p.a)({},O,{className:d}),r);var g=Object(P.a)(o,(function(e){var t,n=null!=(t=e.key)?t:[e.header,e.description].join("-");return i.a.createElement(S,Object(p.a)({key:n},e))}));return i.a.createElement(v,Object(p.a)({},O,{className:d}),g)}C.handledProps=["as","centered","children","className","content","doubling","items","itemsPerRow","stackable","textAlign"],C.propTypes={};var T=C,S=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t}return Object(d.a)(t,e),t.prototype.render=function(){var e=this.props,n=e.centered,a=e.children,r=e.className,c=e.color,o=e.content,s=e.description,u=e.extra,l=e.fluid,d=e.header,v=e.href,g=e.image,E=e.link,y=e.meta,N=e.onClick,k=e.raised,x=Object(m.a)("ui",c,Object(h.a)(n,"centered"),Object(h.a)(l,"fluid"),Object(h.a)(E,"link"),Object(h.a)(k,"raised"),"card",r),w=Object(f.a)(t,this.props),P=Object(b.a)(t,this.props,(function(){if(N)return"a"}));return j.a.isNil(a)?j.a.isNil(o)?i.a.createElement(P,Object(p.a)({},w,{className:x,href:v,onClick:this.handleClick}),O.a.create(g,{autoGenerateKey:!1,defaultProps:{ui:!1,wrapped:!0}}),(s||d||y)&&i.a.createElement(A,{description:s,header:d,meta:y}),u&&i.a.createElement(A,{extra:!0},u)):i.a.createElement(P,Object(p.a)({},w,{className:x,href:v,onClick:this.handleClick}),o):i.a.createElement(P,Object(p.a)({},w,{className:x,href:v,onClick:this.handleClick}),a)},t}(s.Component);S.handledProps=["as","centered","children","className","color","content","description","extra","fluid","header","href","image","link","meta","onClick","raised"],S.propTypes={},S.Content=A,S.Description=E,S.Group=T,S.Header=N,S.Meta=x;var B=n(76),D=function(e){var t=e.i,n=e.post;return i.a.createElement(s.Fragment,null,i.a.createElement(S,{key:t,style:{height:"350px"}},i.a.createElement(O.a,{style:{height:"200px",width:"100%",backgroundColor:"#0E2F56"},src:"/api/post/photo/".concat(n._id),wrapped:!0,ui:!1}),i.a.createElement(S.Content,null,i.a.createElement(S.Header,null,n.title.substring(0,20)),i.a.createElement(S.Meta,null,i.a.createElement("span",{className:"date"},new Date(n.created).toDateString())),i.a.createElement(S.Description,null,i.a.createElement("p",{className:"card-text",dangerouslySetInnerHTML:{__html:n.body?n.body.substring(0,200)+"...":""}}))),i.a.createElement(S.Content,{extra:!0},i.a.createElement(l.b,{to:"/post/".concat(n._id)},i.a.createElement("p",null,i.a.createElement(B.a,{name:"arrow right"}),"Read more")))))},I=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).loadMore=function(t){e.setState({page:e.state.page+t}),e.loadPosts(e.state.page+t)},e.loadLess=function(t){e.setState({page:e.state.page-t}),e.loadPosts(e.state.page-t)},e.loadPosts=function(t){Object(u.f)(t).then((function(t){t.error?console.log(t.error):(console.log(t.post),e.setState({posts:t.post}))}))},e.renderPosts=function(t){return i.a.createElement(S.Group,{stackable:!0,itemsPerRow:4},t.map((function(t,n){var a=t.postedBy?"/user/".concat(t.postedBy._id):"",r=t.postedBy?t.postedBy.name:" Unknown";return i.a.createElement(D,{history:e.props.history,i:n,post:t,posterId:a,posterName:r})})))},e.state={posts:[],page:1,loading:!1},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.loadPosts(this.state.page),Object(u.d)().then((function(t){e.setState({posts:t.post,loading:!1})})).catch((function(e){return console.log(e.response)}))}},{key:"render",value:function(){var e=this.state,t=e.posts;return e.loading?i.a.createElement("h2",null,"Loading..."):i.a.createElement("div",{className:"container"},i.a.createElement("h2",{className:"mt-5 mb-5"},t.length?"Recent Posts":"No more posts!"),this.renderPosts(t))}}]),n}(s.Component);t.a=I},213:function(e,t,n){"use strict";n.r(t);var a=n(80),r=n(81),c=n(83),o=n(82),s=n(0),i=n.n(s),u=n(112),l=n(205),p=n.n(l),d=n(18),m=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).state={users:[]},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)().then((function(t){e.setState({users:t})})).catch((function(e){return console.log(e.response.data.error)}))}},{key:"render",value:function(){var e=this.state.users;return i.a.createElement("div",{className:"container"},i.a.createElement("h2",{className:"mt-5 mb-5"},"Users"),i.a.createElement("div",{className:"row"},e.map((function(e,t){return i.a.createElement("div",{key:t,className:"col-md-3"},i.a.createElement("div",{className:"card testimonial-card"},i.a.createElement("div",{className:"card-up indigo lighten-1"}),i.a.createElement("div",{className:"avatar mx-auto white"},i.a.createElement("img",{alt:"avatar",style:{height:"128px"},src:e._id?"/api/user/photo/".concat(e._id):p.a,onError:function(e){e.target.src="".concat(p.a)},className:"rounded-circle"})),i.a.createElement("div",{className:"card-body"},i.a.createElement("h4",{className:"card-title"},e.name),i.a.createElement("hr",null),i.a.createElement("p",null,i.a.createElement("i",{className:"fas fa-quote-left"})," Email: ",e.email),i.a.createElement(d.b,{to:"/user/".concat(e._id)},"View Profile"))))}))))}}]),n}(s.Component);t.default=m},247:function(e,t,n){"use strict";n.r(t);var a=n(80),r=n(81),c=n(83),o=n(82),s=n(0),i=n.n(s),u=n(211),l=n(213),p=n(11),d=n(9),m=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={redirectToHome:!1},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){"admin"!==Object(p.c)().user.role&&this.setState({redirectToHome:!0})}},{key:"render",value:function(){return this.state.redirectToHome?i.a.createElement(d.a,{to:"/"}):i.a.createElement("div",{className:"m-4"},i.a.createElement("div",{className:"jumbotron"},i.a.createElement("h2",null,"Admin Dashboard"),i.a.createElement("p",{className:"lead"},"Welcome to React Frontend")),i.a.createElement("div",{className:"container"},i.a.createElement("h2",null,"Posts"),i.a.createElement("hr",null),i.a.createElement(u.a,null)),i.a.createElement("div",{className:"container"},i.a.createElement("h2",null,"Users"),i.a.createElement("hr",null),i.a.createElement(l.default,null)))}}]),n}(s.Component);t.default=m}}]);
//# sourceMappingURL=4.08625a45.chunk.js.map