(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[9],{204:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return i})),n.d(t,"f",(function(){return u})),n.d(t,"c",(function(){return m})),n.d(t,"j",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"g",(function(){return h})),n.d(t,"k",(function(){return b})),n.d(t,"a",(function(){return E})),n.d(t,"i",(function(){return v}));var a=n(12),r=n.n(a),c=n(29),o=n(25),s=n.n(o),l=function(){var e=Object(c.a)(r.a.mark((function e(t,n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("/api/post/new/".concat(t),a,{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return e.data})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/post").then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e),e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/post/?page=".concat(t)).then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e.response),e.response}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e,t,n){return fetch("/api/post/like",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},d=function(e,t,n){return fetch("/api/post/unlike",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},p=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/post/".concat(t)).then((function(e){return e.data})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/post/by/".concat(t),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return e.data.result})).catch((function(e){return console.error(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/post/".concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(r.a.mark((function e(t,n,a){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s()("/api/post/".concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(n)},data:a});case 3:if(!(c=e.sent)){e.next=6;break}return e.abrupt("return",c);case 6:e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(0),console.error(e.t0),!e.t0.response.data){e.next=13;break}return e.abrupt("return",e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,a){return e.apply(this,arguments)}}(),E=function(e,t,n,a){return fetch("/api/post/comment",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n,comment:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},v=function(e,t,n,a){return fetch("/api/post/uncomment",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n,comment:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}},205:function(e,t,n){e.exports=n.p+"static/media/Default.2aee7378.png"},248:function(e,t,n){"use strict";n.r(t);var a=n(80),r=n(81),c=n(83),o=n(82),s=n(0),l=n.n(s),i=n(11),u=n(9),m=n(18),d=n(112),p=n(205),f=n.n(p),h=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={redirect:!1},e.deleteAccount=function(){var t=e.props.userId,n=Object(i.c)().token;Object(d.e)(t,n).then((function(t){Object(i.d)((function(){return console.log("signout")})),e.setState({redirect:!0})})).catch((function(e){return console.log(e)}))},e.deleteConfirm=function(){window.confirm("Are u sure to delete account?")&&e.deleteAccount()},e}return Object(r.a)(n,[{key:"render",value:function(){return this.state.redirect?l.a.createElement(u.a,{to:"/"}):l.a.createElement("button",{onClick:this.deleteConfirm,className:"btn btn-raised btn-danger"},"Delete")}}]),n}(s.Component),b=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).followClick=function(){console.log("i m follow"),e.props.onButtonClick(d.b)},e.unfollowClick=function(){console.log("i m unfollow"),e.props.onButtonClick(d.f)},e}return Object(r.a)(n,[{key:"render",value:function(){return l.a.createElement("div",{className:"d-inline-block mt-2"},this.props.following?l.a.createElement("button",{onClick:this.unfollowClick,className:"btn btn-success btn-raised mt-5"},"UnFollow"):l.a.createElement("button",{onClick:this.followClick,className:"btn btn-success btn-raised mt-5"},"Follow"))}}]),n}(s.Component),E=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.following,n=e.followers,a=e.posts;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("h3",{className:"text-primary"},n.length," Followers"),l.a.createElement("hr",null),n.map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",null,l.a.createElement(m.b,{to:"/user/".concat(e._id)},l.a.createElement("img",{style:{borderRadius:"50%",border:"1px solid black"},className:"float-left mr-2",height:"30px",width:"30px",onError:function(e){return e.target.src="".concat(f.a)},src:"/api/user/photo/".concat(e._id),alt:e.name}),l.a.createElement("div",null,l.a.createElement("p",{className:"lead"},e.name)))),l.a.createElement("br",null))}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("h3",{className:"text-primary"},t.length," Following"),l.a.createElement("hr",null),t.map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",null,l.a.createElement(m.b,{to:"/user/".concat(e._id)},l.a.createElement("img",{style:{borderRadius:"50%",border:"1px solid black"},className:"float-left mr-2",height:"30px",width:"30px",onError:function(e){return e.target.src="".concat(f.a)},src:"/api/user/photo/".concat(e._id),alt:e.name}),l.a.createElement("div",null,l.a.createElement("p",{className:"lead"},e.name)))),l.a.createElement("br",null))}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("h3",{className:"text-primary"},a.length," Posts"),l.a.createElement("hr",null),a.map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",null,l.a.createElement(m.b,{to:"/post/".concat(e._id)},l.a.createElement("div",null,l.a.createElement("p",{className:"lead"},e.title)))))})))))}}]),n}(s.Component),v=n(204),g=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).checkFollow=function(e){var t=Object(i.c)();return e.followers.find((function(e){return e._id===t.user._id}))},e.clickFollowButton=function(t){t(Object(i.c)().user._id,Object(i.c)().token,e.state.user._id).then((function(t){console.log(t),e.setState({user:t,following:!e.state.following})})).catch((function(t){return e.setState({error:t.response})}))},e.init=function(t){var n=Object(i.c)().token;Object(d.d)(t,n).then((function(a){Object(v.e)(t,n).then((function(t){e.setState({posts:t})}));var r=e.checkFollow(a.data);e.setState({user:a.data,following:r})})).catch((function(t){console.error(t.response),e.setState({redirectToSignin:!0})}))},e.state={user:{following:[],followers:[]},redirectToSignin:!1,following:!1,error:"",posts:[]},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;this.init(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.match.params.userId;this.init(t)}},{key:"render",value:function(){var e=this.state,t=e.redirectToSignin,n=e.posts,a=e.user;if(t)return l.a.createElement(u.a,{to:"/login"});var r=a._id?"/api/user/photo/".concat(a._id):f.a;return l.a.createElement("div",{className:"m-4"},l.a.createElement("div",{class:"container"},l.a.createElement("div",{class:"main-body"},l.a.createElement("nav",{"aria-label":"breadcrumb",class:"main-breadcrumb"},l.a.createElement("ol",{class:"breadcrumb"},l.a.createElement("li",{class:"breadcrumb-item"},l.a.createElement("a",{href:"/"},"Home")),l.a.createElement("li",{class:"breadcrumb-item active","aria-current":"page"},"User Profile"))),l.a.createElement("div",{class:"row gutters-sm"},l.a.createElement("div",{class:"col-md-4 mb-3"},l.a.createElement("div",{class:"card"},l.a.createElement("div",{class:"card-body"},l.a.createElement("div",{class:"d-flex flex-column align-items-center text-center"},l.a.createElement("img",{src:r,onError:function(e){e.target.src="".concat(f.a)},alt:a.name,class:"rounded-circle",width:"150"}),l.a.createElement("div",{class:"mt-3"},l.a.createElement("h4",null,a.name),l.a.createElement("p",{class:"text-secondary mb-1"},"A Golden Blogger"),"Joined ".concat(new Date(a.created).toDateString()),l.a.createElement("p",{class:"text-muted font-size-sm"},a.about),l.a.createElement("div",{class:"row"},Object(i.c)().user&&Object(i.c)().user._id===a._id?l.a.createElement("div",{className:"d-inline-block"},l.a.createElement(m.b,{className:"btn btn-raised btn-info mr-5",to:"/create/post"},"Create Post"),l.a.createElement(m.b,{className:"btn btn-raised btn-success mr-5",to:"/profile/edit/".concat(a._id)},"Edit Profile")):l.a.createElement(b,{following:this.state.following,onButtonClick:this.clickFollowButton}))))))),l.a.createElement("div",{class:"col-md-8"},l.a.createElement("div",{class:"card mb-3"},l.a.createElement("div",{class:"card-body"},l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"col-sm-3"},l.a.createElement("h6",{class:"mb-0"},"Full Name")),l.a.createElement("div",{class:"col-sm-9 text-secondary"},a.name)),l.a.createElement("hr",null),l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"col-sm-3"},l.a.createElement("h6",{class:"mb-0"},"Email")),l.a.createElement("div",{class:"col-sm-9 text-secondary"},a.email)),l.a.createElement("hr",null),l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"col-sm-3"},l.a.createElement("h6",{class:"mb-0"},"Phone")),l.a.createElement("div",{class:"col-sm-9 text-secondary"},a.phone_number)),l.a.createElement("hr",null),l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"col-sm-3"},l.a.createElement("h6",{class:"mb-0"},"About")),l.a.createElement("div",{class:"col-sm-9 text-secondary"},a.about)),l.a.createElement("hr",null))),l.a.createElement(E,{posts:n,followers:this.state.user.followers,following:this.state.user.following})))),Object(i.c)().user&&"admin"===Object(i.c)().user.role&&l.a.createElement("div",{className:"card mt-5"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h5",{className:"card-title"},"Admin"),l.a.createElement("p",{className:"mb-2 text-danger"},"Edit/Delete as an Admin"),l.a.createElement(m.b,{className:"btn btn-raised btn-success mr-5",to:"/profile/edit/".concat(a._id)},"Edit Profile"),l.a.createElement(h,{userId:a._id})))))}}]),n}(s.Component);t.default=g}}]);
//# sourceMappingURL=9.d18c6973.chunk.js.map