{"version":3,"sources":["post/apiPost.js","user/Default.png","core/Logo.png","post/Comment.js","post/SinglePost.js"],"names":["create","userId","token","post","a","axios","headers","Authorization","then","res","data","catch","err","list","get","console","log","pageList","page","response","like","postId","fetch","method","Accept","body","JSON","stringify","json","unlike","singlePost","id","listByUser","result","error","remove","update","comment","uncomment","module","exports","Comment","state","text","handleChange","event","setState","target","value","isValid","length","addComment","e","preventDefault","isAuthenticated","user","_id","props","updateComments","comments","deleteComment","deleteConfirmed","window","confirm","this","className","onSubmit","type","onChange","placeholder","style","display","map","i","key","to","postedBy","borderRadius","border","height","width","onError","src","Default","alt","name","Date","created","toDateString","onClick","Component","SinglePost","redirectToHome","redirectToSignin","likes","checkLike","indexOf","componentDidMount","match","params","likeToggle","callApi","deletePost","renderPost","posterId","posterName","title","Logo","objectFit","backgroundColor","padding","dangerouslySetInnerHTML","__html","role","reverse"],"mappings":"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","file":"static/js/5.bceb60cc.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport const create = async (userId, token, post) => {\n  return await axios\n    .post(`/api/post/new/${userId}`, post, {\n      headers: { Authorization: `Bearer ${token}` },\n    })\n    .then((res) => res.data)\n    .catch((err) => err);\n};\n\nexport const list = async () => {\n  return await axios\n    .get(`/api/post`)\n    .then((res) => {\n      console.log(res);\n      return res.data;\n    })\n    .catch((err) => {\n      console.log(err);\n      return err;\n    });\n};\nexport const pageList = async (page) => {\n  return await axios\n    .get(`/api/post/?page=${page}`)\n    .then((res) => {\n      console.log(res);\n      return res.data;\n    })\n    .catch((err) => {\n      console.log(err.response);\n      return err.response;\n    });\n};\n\nexport const like = (userId, token, postId) => {\n  return fetch(`/api/post/like`, {\n    method: \"PUT\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n    body: JSON.stringify({ userId, postId }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const unlike = (userId, token, postId) => {\n  return fetch(`/api/post/unlike`, {\n    method: \"PUT\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n    body: JSON.stringify({ userId, postId }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .catch((err) => console.log(err));\n};\nexport const singlePost = async (id) => {\n  return await axios\n    .get(`/api/post/${id}`)\n    .then((res) => res.data)\n    .catch((err) => err);\n};\nexport const listByUser = async (userId, token) => {\n  return await axios\n    .get(`/api/post/by/${userId}`, {\n      headers: { Authorization: `Bearer ${token}` },\n    })\n    .then((res) => res.data.result)\n    .catch((err) => console.error(err));\n};\nexport const remove = async (postId, token) => {\n  try {\n    const response = await fetch(`/api/post/${postId}`, {\n      method: \"DELETE\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    });\n    return response.json();\n  } catch (err) {\n    return console.log(err);\n  }\n};\nexport const update = async (postId, token, post) => {\n  //console.log(postId, token, post);\n  try {\n    const response = await axios(`/api/post/${postId}`, {\n      method: \"PUT\",\n      headers: {\n        Accept: \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n      data: post,\n    });\n    if (response) {\n      return response;\n    }\n  } catch (err) {\n    console.error(err);\n    if (err.response.data) {\n      return err.response.data;\n    }\n  }\n};\n\nexport const comment = (userId, token, postId, comment) => {\n  return fetch(`/api/post/comment`, {\n    method: \"PUT\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n    body: JSON.stringify({ userId, postId, comment }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const uncomment = (userId, token, postId, comment) => {\n  return fetch(`/api/post/uncomment`, {\n    method: \"PUT\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n    body: JSON.stringify({ userId, postId, comment }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .catch((err) => console.log(err));\n};\n","module.exports = __webpack_public_path__ + \"static/media/Default.2aee7378.png\";","module.exports = __webpack_public_path__ + \"static/media/Logo.2aee7378.png\";","import React, { Component } from \"react\";\nimport { comment, uncomment } from \"./apiPost\";\nimport { isAuthenticated } from \"../auth\";\nimport { Link } from \"react-router-dom\";\nimport Default from \"../user/Default.png\";\nclass Comment extends Component {\n  state = {\n    text: \"\",\n    error: \"\"\n  };\n\n  handleChange = event => {\n    this.setState({ error: \"\" });\n    this.setState({ text: event.target.value });\n  };\n\n  isValid = () => {\n    const { text } = this.state;\n    if (!text.length > 0 || text.length > 150) {\n      this.setState({\n        error: \"Comment should not be empty and less than 150 characters long\"\n      });\n      return false;\n    }\n    return true;\n  };\n\n  addComment = e => {\n    e.preventDefault();\n\n    if (!isAuthenticated()) {\n      this.setState({ error: \"Please signin to leave a comment\" });\n      return false;\n    }\n\n    if (this.isValid()) {\n      const userId = isAuthenticated().user._id;\n      const token = isAuthenticated().token;\n      const postId = this.props.postId;\n\n      comment(userId, token, postId, { text: this.state.text }).then(data => {\n        console.log(data);\n        if (data.error) {\n          console.log(data.error);\n        } else {\n          this.setState({ text: \"\" });\n          // dispatch fresh list of coments to parent (SinglePost)\n          this.props.updateComments(data.comments);\n        }\n      });\n    }\n  };\n\n  deleteComment = comment => {\n    const userId = isAuthenticated().user._id;\n    const token = isAuthenticated().token;\n    const postId = this.props.postId;\n\n    uncomment(userId, token, postId, comment).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        this.props.updateComments(data.comments);\n      }\n    });\n  };\n\n  deleteConfirmed = comment => {\n    let answer = window.confirm(\n      \"Are you sure you want to delete your comment?\"\n    );\n    if (answer) {\n      this.deleteComment(comment);\n    }\n  };\n\n  render() {\n    const { comments } = this.props;\n    const { error } = this.state;\n    return (\n      <div>\n        <h2 className=\"mt-5 mb-5\">Leave a comment</h2>\n\n        <form onSubmit={this.addComment}>\n          <div className=\"form-group\">\n            <input\n              type=\"text\"\n              onChange={this.handleChange}\n              value={this.state.text}\n              className=\"form-control\"\n              placeholder=\"Leave a comment...\"\n            />\n            <button className=\"btn btn-raised btn-success mt-2\">Post</button>\n          </div>\n        </form>\n\n        <div\n          className=\"alert alert-danger\"\n          style={{ display: error ? \"\" : \"none\" }}\n        >\n          {error}\n        </div>\n\n        <div className=\"col-md-12\">\n          <h3 className=\"text-primary\">{comments.length} Comments</h3>\n          <hr />\n          {comments.map((comment, i) => (\n            <div key={i}>\n              <div>\n                <Link to={`/user/${comment.postedBy}`}>\n                  <img\n                    style={{\n                      borderRadius: \"50%\",\n                      border: \"1px solid black\"\n                    }}\n                    className=\"float-left mr-2\"\n                    height=\"30px\"\n                    width=\"30px\"\n                    onError={i => (i.target.src = `${Default}`)}\n                    src={`/api/user/photo/${comment.postedBy}`}\n                    alt={comment.postedBy.name}\n                  />\n                </Link>\n                <div>\n                  <p className=\"lead\">{comment.text}</p>\n                  <p className=\"font-italic mark\">\n                    Posted by{\" \"}\n                    <Link to={`/user/${comment.postedBy}`}>\n                      {comment.postedBy.name}{\" \"}\n                    </Link>\n                    on {new Date(comment.created).toDateString()}\n                    <span>\n                      {isAuthenticated().user &&\n                        isAuthenticated().user._id === comment.postedBy && (\n                          <>\n                            <span\n                              onClick={() => this.deleteConfirmed(comment)}\n                              className=\"text-danger float-right mr-1\"\n                            >\n                              Remove\n                            </span>\n                          </>\n                        )}\n                    </span>\n                  </p>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Comment;\n","import React, { Component } from \"react\";\nimport { singlePost, remove, like, unlike } from \"./apiPost\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { isAuthenticated } from \"../auth\";\nimport Comment from \"./Comment\";\nimport Logo from \"../core/Logo.png\";\nclass SinglePost extends Component {\n  state = {\n    post: \"\",\n    redirectToHome: false,\n    redirectToSignin: false,\n    like: false,\n    likes: 0,\n    comments: [],\n  };\n  checkLike = (likes) => {\n    const userId = isAuthenticated() && isAuthenticated().user._id;\n    let match = likes.indexOf(userId) !== -1;\n    return match;\n  };\n  componentDidMount = () => {\n    const postId = this.props.match.params.postId;\n    singlePost(postId)\n      .then((data) => {\n        this.setState({\n          post: data,\n          likes: data.likes.length,\n          comments: data.comments,\n          like: this.checkLike(data.likes),\n        });\n      })\n      .catch((err) => console.log(err));\n  };\n  updateComments = (comments) => {\n    this.setState({ comments });\n  };\n\n  likeToggle = () => {\n    if (!isAuthenticated()) {\n      this.setState({ redirectToSignin: true });\n      return false;\n    }\n    let callApi = this.state.like ? unlike : like;\n    const userId = isAuthenticated().user._id;\n    const postId = this.state.post._id;\n    const token = isAuthenticated().token;\n\n    callApi(userId, token, postId).then((data) => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        this.setState({\n          like: !this.state.like,\n          likes: data.likes.length,\n        });\n      }\n    });\n  };\n  deletePost = () => {\n    const postId = this.props.match.params.postId;\n    const token = isAuthenticated().token;\n    remove(postId, token).then((data) => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        this.setState({ redirectToHome: true });\n      }\n    });\n  };\n\n  deleteConfirmed = () => {\n    let answer = window.confirm(\"Are you sure you want to delete your post?\");\n    if (answer) {\n      this.deletePost();\n    }\n  };\n  renderPost = (post) => {\n    const posterId = post.postedBy ? `/user/${post.postedBy._id}` : \"\";\n    const posterName = post.postedBy ? post.postedBy.name : \" Unknown\";\n    const { like, likes } = this.state;\n    return (\n      <div className=\"card-body mb-5\">\n        <Link to={`/`} className=\"btn btn-raised btn-link btn-md\">\n          Back to posts\n        </Link>\n        <h2>{post.title}</h2>\n        <img\n          src={`/api/post/photo/${post._id}`}\n          alt={post.title}\n          onError={(i) => (i.target.src = `${Logo}`)}\n          className=\"img-fluid mb-3\"\n          style={{\n            height: \"300px\",\n            width: \"100%\",\n            objectFit: \"cover\",\n            backgroundColor: \"#0E2F56\",\n          }}\n        />\n        {like ? (\n          <h3 onClick={this.likeToggle}>\n            <i\n              className=\"thumbs up outline icon text-success\"\n              style={{ padding: \"10px\", borderRadius: \"50%\" }}\n            />{\" \"}\n            {likes} Like\n          </h3>\n        ) : (\n          <h3 onClick={this.likeToggle}>\n            <i\n              className=\"thumbs up outline icon text-warning\"\n              style={{ padding: \"10px\", borderRadius: \"50%\" }}\n            />{\" \"}\n            {likes} Like\n          </h3>\n        )}\n        {/* <Share title={post.title} /> */}\n        <hr />\n        <div\n          className=\"container\"\n          dangerouslySetInnerHTML={{ __html: post.body }}\n        ></div>\n        <br />\n        <p className=\"font-italic mark\">\n          Posted by <Link to={`${posterId}`}>{posterName} </Link>\n          on {new Date(post.created).toDateString()}\n        </p>\n        {isAuthenticated().user &&\n          isAuthenticated().user._id === post.postedBy._id && (\n            <div>\n              <Link\n                to={`/posts/edit/${post._id}`}\n                className=\"btn btn-raised btn-info btn-md\"\n              >\n                Update Post\n              </Link>\n              <button\n                onClick={this.deleteConfirmed}\n                className=\"btn btn-raised btn-md btn-danger\"\n              >\n                Delete Post\n              </button>\n            </div>\n          )}\n        <div>\n          {isAuthenticated().user && isAuthenticated().user.role === \"admin\" && (\n            <div className=\"card mt-5\">\n              <div className=\"card-body\">\n                <h5 className=\"card-title\">Admin</h5>\n                <p className=\"mb-2 text-danger\">Edit/Delete as an Admin</p>\n                <Link\n                  to={`/posts/edit/${post._id}`}\n                  className=\"btn btn-raised btn-warning btn-sm mr-5\"\n                >\n                  Update Post\n                </Link>\n                <button\n                  onClick={this.deleteConfirmed}\n                  className=\"btn btn-raised btn-danger\"\n                >\n                  Delete Post\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  };\n  render() {\n    const { post, redirectToHome, redirectToSignin, comments } = this.state;\n    if (redirectToHome) {\n      return <Redirect to={`/`} />;\n    } else if (redirectToSignin) {\n      return <Redirect to={`/login`} />;\n    }\n    return (\n      <div className=\"container mt-5 mb-5\">\n        {!post ? (\n          <div className=\"jumbotron text-center\">\n            <h2>Loading...</h2>\n          </div>\n        ) : (\n          this.renderPost(post)\n        )}\n        <Comment\n          postId={post._id}\n          comments={comments.reverse()}\n          updateComments={this.updateComments}\n        />\n      </div>\n    );\n  }\n}\n\nexport default SinglePost;\n"],"sourceRoot":""}